% useful template:
% https://www.overleaf.com/latex/templates/imperial-college-london-phd-thesis-latex-template/zfybynnyczhb

\documentclass[a4,12pt,twoside]{report}
\usepackage[a-2b,mathxmp]{pdfx}[2018/12/22]
\usepackage[left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}

\usepackage[rgb]{xcolor}
\selectcolormodel{natural}
\usepackage{ninecolors}
\selectcolormodel{rgb}

% formatting bits and pieces

% avoid widows/orphans
% https://tex.stackexchange.com/questions/4152/how-do-i-prevent-widow-orphan-lines#30409
\usepackage[all]{nowidow}

% less hyphenation
% https://tex.stackexchange.com/questions/31301/how-to-reduce-the-number-of-hyphenation
\pretolerance=5000
\tolerance=9000
\emergencystretch=0pt
\righthyphenmin=4
\lefthyphenmin=4

% do not let figures get too wide
% https://tex.stackexchange.com/questions/86350/includegraphics-maximum-width
\usepackage[export]{adjustbox}

\usepackage{amsmath}
\usepackage{amssymb}
% https://tex.stackexchange.com/questions/4216/how-to-typeset-correctly
\usepackage{mathtools}

% set one half spacing but also reduce spacing between equations
% https://tex.stackexchange.com/questions/32918/how-can-i-decrease-spaces-between-equations
\usepackage[nodisplayskipstretch]{setspace}
  \onehalfspacing
  % \setstretch{.9}

% FIGURES
\usepackage{hyperref}

\usepackage{cleveref}
\usepackage{graphicx}
  \graphicspath{{./figures}}
% for subfigures
\usepackage{caption}
\usepackage{subcaption}

% for subfigure finangling
% https://tex.stackexchange.com/questions/333249/controlling-subfigure-captions-and-subfigure-placement
\newsavebox{\imagebox}

% code overlay: https://tex.stackexchange.com/questions/287549/is-it-possible-to-use-tikzmark-inside-minted
\usepackage{tikz}
  \usetikzlibrary{calc,decorations.pathreplacing,tikzmark}

% ------ TABLES -------

% increase table spacing (https://www.overleaf.com/learn/latex/Questions/How_do_I_change_column_or_row_separation_in_LaTeX_tables)
\renewcommand{\arraystretch}{1.2}

% BIBLIOGRAPHY
\usepackage{biblatex}
  \addbibresource{bibliography.bib}

% TODO
\usepackage{todonotes}

% ============================== EXAMPLES ==============================

% needs to be here and not in mymacros.sty because "chapter" fails in tikz envs.
% https://tex.stackexchange.com/questions/21227/example-environment
\usepackage{amsthm}
\theoremstyle{definition}
\newtheorem{example}{Example}[chapter]
\newtheorem{definition}{Definition}[chapter]


% CUSTOM
\usepackage{mymacros}

% https://tex.stackexchange.com/questions/159988/sidewaysfigure-and-landscape
\usepackage{pdflscape}

% table footnotes
% https://stackoverflow.com/questions/2888817/footnotes-for-tables-in-latex
\usepackage{tablefootnote}

% nice boxes for paragraphs
\usepackage{tcolorbox}
\newtcolorbox{pyopcompare}{fonttitle=\bfseries,title=Comparison with \pyop2}


% must be last package used
\usepackage{subfiles}

\begin{document}
  \input{titlepage}
  \input{abstract}
  \input{declaration}
  \input{acknowledgements}
  \input{dedication}
  \tableofcontents

  \subfile{chapters/1_introduction}
  \subfile{chapters/2_foundations}
  \subfile{chapters/3_axis_trees}
  \subfile{chapters/4_indexing}
  \subfile{chapters/5_dsl}
  \subfile{chapters/6_parallel}
  \subfile{chapters/7_firedrake}
  \subfile{chapters/8_apps}
  \subfile{chapters/9_conclusions}

  \printbibliography
\end{document}
